<!DOCTYPE html>
<html lang="en" style="width: 100%; height: 100%; margin: 0; padding: 0">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MF</title>
    <link rel="stylesheet" href="/static/jquery-ui.css">
    <style>
      .ui-autocomplete {
      max-height: 20em;
      overflow-y: auto;
      /* prevent horizontal scrollbar */
      overflow-x: hidden;
      }
    </style>
    <script src="/static/jquery.js"></script>
    <script src="/static/jquery-ui.js"></script>
    <script>
      function getText(){
        // read text from URL location
        var request = new XMLHttpRequest();
        request.open("GET", "/static/csv/mf_code_names.csv", true);
        request.send(null);
        request.onreadystatechange = function () {
          if (request.readyState === 4 && request.status === 200) {
            var type = request.getResponseHeader('Content-Type');
            if (type.indexOf("text") !== 1) {
                return request.responseText;
            }
          }
        }
      }

      function navAutocompleteCb(ui) {
        var btn = document.createElement("button");
        var txt = document.createTextNode(ui.item.mfcode + " - " + ui.item.label);
        btn.appendChild(txt);
        btn.setAttribute("id", "btn" + ui.item.label);
        btn.setAttribute("class", "ui-button ui-widget ui-corner-all");
        btn.setAttribute("style", "width: 100%; margin-top: 1em; box-sizing: border-box;");

        document.getElementById("divNavList").appendChild(btn);
      }

      $(function() {
        var availableTags = [ {{ mf_codes|join(',\n')|safe }} ];
        $("#inputNavSearch").autocomplete({
          source: availableTags,
          delay: 300,
          minLength: 4,
          select: function(event, ui) {
            navAutocompleteCb(ui);
            return true;
          }
        });
      });
    </script>
  </head>
  <body style="width: 100%; height: 100%; margin: 0; padding: 0">

    <div style="width: 100%; height: 100%; margin: 0; padding: 1em; display: table; box-sizing: border-box;">
      <div style="width: 100%; height: 100%; margin: 0; padding: 0; display: table-row;">

        <div id="divNavList" style="width: 25%; display: table-cell; margin: 0; padding: 1em; border: 0.1em solid #AAAAAA;">
          <h3>This is a heading</h3>
          <p>Hello {{ name }}!</p>
          <div>
            <input id="inputNavSearch" style="width: 100%; box-sizing: border-box;">
          </div>
        </div>

        <div id="divChart" style="width: 75%; display: table-cell; margin: 0; padding: 1em; border: 0.1em solid #AAAAAA;">
          <h3>This is a heading</h3>
          <p>Hello {{ name }}!</p>
        </div>

      </div>
    </div>

  </body>
</html>

